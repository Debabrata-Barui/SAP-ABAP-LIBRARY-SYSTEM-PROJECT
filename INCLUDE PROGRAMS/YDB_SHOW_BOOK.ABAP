*&---------------------------------------------------------------------*
*&  Include           YDB_SHOW_BOOK
*&---------------------------------------------------------------------*

*&---------------------------------------------------------------------*
*&      Module  STATUS_1007  OUTPUT
*&---------------------------------------------------------------------*
*       text
*----------------------------------------------------------------------*
MODULE STATUS_1007 OUTPUT.
*  SET PF-STATUS 'xxxxxxxx'.
*  SET TITLEBAR 'xxx'.

*TABLES: YDB_INFO, YDB_GET_BOOK.


TYPES: BEGIN OF ST_JOIN,
        STU_ID  TYPE YDB_STU_ID,
        USERID  TYPE YDB_USERID,
        ROLL    TYPE YDB_ROLL,
        NAME    TYPE YDB_NAME,
        GENDER  TYPE YDB_GENDER,
        DEGREE  TYPE YDB_DEGREE,
        FIELD   TYPE YDB_FIELD,
        SESS    TYPE YDB_SESS,
        ADDRESS TYPE YDB_ADD,
        DATE_AND_TIME TYPE YDB_DT,
        GET_ID      TYPE YDB_GET_ID,
        BOOK_ID     TYPE YDB_BOOK_ID,
        BOOK_NAME   TYPE YDB_BOOK_NAME,
        AUTHOR      TYPE YDB_AUTHOR,
        ADDITION    TYPE YDB_ADDITION,
        CRT_DATE    TYPE DATE,

END OF  ST_JOIN.



DATA: IT_JOIN TYPE TABLE OF ST_JOIN,
      WA_JOIN  TYPE ST_JOIN.




 DATA: IT_PRO TYPE TABLE OF YDB_INFO,
       WA_PRO TYPE YDB_INFO.

 DATA: IT_GT_BOOK TYPE TABLE OF YDB_GET_BOOK,
       WA_GT_BOOK TYPE YDB_GET_BOOK.

CLEAR: WA_JOIN, WA_PRO,WA_GT_BOOK.
REFRESH: IT_PRO, IT_GT_BOOK, IT_JOIN.

SELECT  YDB_INFO~STU_ID
        YDB_INFO~USERID
        YDB_INFO~ROLL
        YDB_INFO~NAME
        YDB_INFO~GENDER
        YDB_INFO~DEGREE
        YDB_INFO~FIELD
        YDB_INFO~SESS
        YDB_INFO~ADDRESS
        YDB_INFO~DATE_AND_TIME
        YDB_GET_BOOK~GET_ID
        YDB_GET_BOOK~BOOK_ID
        YDB_GET_BOOK~BOOK_NAME
        YDB_GET_BOOK~AUTHOR
        YDB_GET_BOOK~ADDITION
        YDB_GET_BOOK~CRT_DATE

 INTO  CORRESPONDING FIELDS OF TABLE IT_JOIN
 FROM YDB_INFO INNER JOIN YDB_GET_BOOK
  ON YDB_INFO~STU_ID = YDB_GET_BOOK~STU_ID
  WHERE YDB_INFO~STU_ID = STUID.




IF SY-UCOMM = 'BACKWARD'.
  LEAVE TO SCREEN 1001.
ELSEIF SY-UCOMM = 'EXIT'.
  LEAVE TO SCREEN 0.
ELSEIF SY-UCOMM = 'CENCEL'.
  LEAVE TO SCREEN 0.
ENDIF.


ENDMODULE.

*&SPWIZARD: DECLARATION OF TABLECONTROL 'SHOW_TBL' ITSELF
CONTROLS: SHOW_TBL TYPE TABLEVIEW USING SCREEN 1007.

*&SPWIZARD: LINES OF TABLECONTROL 'SHOW_TBL'
DATA:     G_SHOW_TBL_LINES  LIKE SY-LOOPC.

*&SPWIZARD: OUTPUT MODULE FOR TC 'SHOW_TBL'. DO NOT CHANGE THIS LINE!
*&SPWIZARD: UPDATE LINES FOR EQUIVALENT SCROLLBAR
MODULE SHOW_TBL_CHANGE_TC_ATTR OUTPUT.
  DESCRIBE TABLE IT_JOIN LINES SHOW_TBL-lines.
ENDMODULE.

*&SPWIZARD: OUTPUT MODULE FOR TC 'SHOW_TBL'. DO NOT CHANGE THIS LINE!
*&SPWIZARD: GET LINES OF TABLECONTROL
MODULE SHOW_TBL_GET_LINES OUTPUT.
  G_SHOW_TBL_LINES = SY-LOOPC.
ENDMODULE.

*&SPWIZARD: INPUT MODULE FOR TC 'SHOW_TBL'. DO NOT CHANGE THIS LINE!
*&SPWIZARD: PROCESS USER COMMAND
MODULE SHOW_TBL_USER_COMMAND INPUT.
  OK_CODE = SY-UCOMM.
  PERFORM USER_OK_TC USING    'SHOW_TBL'
                              'IT_JOIN'
                              ' '
                     CHANGING OK_CODE.
  SY-UCOMM = OK_CODE.
ENDMODULE.
